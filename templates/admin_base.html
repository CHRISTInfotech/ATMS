<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Admin Dashboard{% endblock %}</title>

  <!-- Bootstrap & Fonts -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css?family=Poppins:400,500,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <style>
    :root {
      --atms-blue: #007bff;
      --sidebar-bg: #f4f5f7;
      --main-bg: #ffffff;
      --primary-text: #172b4d;
      --secondary-text: #6b778c;
      --border-color: #dfe1e6;
      --card-shadow: 0 1px 0 rgba(9, 30, 66, 0.25);
    }
    body { font-family: 'Poppins', sans-serif; background-color: var(--main-bg); color: var(--primary-text); }
    .main-container { min-height: 100vh; display: flex; }

    /* Sidebar */
    .sidebar { 
        background-color: var(--sidebar-bg); 
        width: 300px; 
        padding: 20px; 
        border-right: 1px solid var(--border-color); 
        height: 100vh;           /* full viewport height */
        position: fixed;
        top: 0; 
        left: 0; 
        overflow-y: auto;        /* allow scrolling inside sidebar if content is long */
    }

    .sidebar-logo {
      font-size: 1.75rem;
      font-weight: 700;
      color: #1a202c;
      margin-bottom: 32px;
      padding: 0 8px;
      letter-spacing: -0.5px;
      display: flex;
      align-items: center;
    }

    .logo-image {
      height: 1em;
      width: auto;
      vertical-align: middle;
      margin-right: 6px; /* preserve space between image and text */
    }

    .sidebar-logo span {
      color: var(--atms-blue);
    }
    .sidebar-menu a { color: var(--primary-text); text-decoration: none; display: block; padding: 10px; border-radius: 5px; margin-bottom: 5px; font-weight: 500; }
    .sidebar-menu a:hover { background-color: #e2e4e8; }
    .sidebar-menu a.active { background-color: var(--atms-blue); color: white; }

    /* Main content */
    .main-content { flex-grow: 1; padding: 20px; margin-left: 300px;  min-width: 0; }
    .top-navbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; }
    .top-navbar .brand { font-weight: 700; font-size: 1.25rem; }
    .top-navbar .user-info { display: flex; align-items: center; gap: 15px; }

    /* Cards & Forms */
    .card { border-radius: 8px; box-shadow: var(--card-shadow); margin-bottom: 20px; }
    .card-header { font-weight: 600; background-color: #f4f5f7; }
  </style>
</head>
<body>
<div class="main-container">

  <!-- Sidebar -->
  <div class="sidebar">
    <div class="mb-4">
      <div class="sidebar-logo">
        <img src="{% static 'accounts/images/group-481747-1-19.png' %}" alt="Students Logo" class="logo-image">
        AT<span>MS</span>
      </div>
    </div>
    <div class="sidebar-menu">

    <!-- Admin Dashboard -->
    <a href="{% url 'accounts:admin_dashboard' %}" class="{% if request.resolver_match.url_name == 'admin_dashboard' %}active{% endif %}">
        <i class="fas fa-tachometer-alt"></i> Admin Dashboard
    </a>


      <!-- Create User -->
      <a href="{% url 'accounts:create_user' %}" class="{% if request.resolver_match.url_name == 'create_user' %}active{% endif %}">
        <i class="fas fa-user-plus"></i> Create User
      </a>

      <!-- Manage User -->
      <a href="{% url 'accounts:manage_roles' %}" class="{% if request.resolver_match.url_name == 'manage_roles' %}active{% endif %}">
        <i class="fas fa-users-cog"></i> Manage Roles
      </a>
    </div>
  </div>

  <!-- Main content -->
  <div class="main-content">
    <div class="top-navbar mb-4">
      <div class="d-flex align-items-center flex-wrap">
        <div class="brand">Admin </div>
      </div>
      <div class="user-info">
        <span>Hello, {{ request.user.email }}</span>
        <form action="{% url 'accounts:logout' %}" method="post">
          {% csrf_token %}
          <button type="submit" class="btn btn-sm btn-outline-danger" id="logoutBtn">Logout</button>
        </form>
      </div>
    </div>

    {% block content %}
    <!-- Admin page specific content goes here -->
    {% endblock %}
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.getElementById('logoutBtn').addEventListener('click', function(event) {
      event.preventDefault(); // prevent form submission
      if (confirm('Are you sure you want to logout?')) {
          this.closest('form').submit(); // submit form if confirmed
      }
  });
</script>

</body>
</html>
